# CloudImgs - ç®€å•ã€æ–¹ä¾¿çš„å¼€æºå›¾åºŠé¡¹ç›®ï¼Œæ”¯æŒ NAS éƒ¨ç½²

ä¸€ä¸ªç®€å•ã€æ–¹ä¾¿çš„å¼€æºå›¾åºŠé¡¹ç›®ï¼Œä¸€é”® NAS éƒ¨ç½²ï¼Œæ”¯æŒå›¾ç‰‡ä¸Šä¼ ã€ç®¡ç†ã€é¢„è§ˆå’Œåˆ†äº«ã€‚

## åŠŸèƒ½ç‰¹æ€§

### ğŸš€ æ ¸å¿ƒåŠŸèƒ½

- **å›¾ç‰‡ä¸Šä¼ **: æ”¯æŒæ‹–æ‹½ä¸Šä¼ ï¼Œå¤šç§å›¾ç‰‡æ ¼å¼
- **å›¾ç‰‡ç®¡ç†**: æµè§ˆã€é¢„è§ˆã€ä¸‹è½½ã€åˆ é™¤å›¾ç‰‡
- **å›¾ç‰‡åˆ†äº«**: ä¸€é”®å¤åˆ¶å›¾ç‰‡é“¾æ¥
- **ç»Ÿè®¡ä¿¡æ¯**: å®æ—¶æ˜¾ç¤ºå­˜å‚¨ä½¿ç”¨æƒ…å†µ

### ğŸ“ å­ç›®å½•ç®¡ç† (æ–°å¢)

- **æ™ºèƒ½ç›®å½•é€‰æ‹©**: å¯é€‰æ‹©ç°æœ‰ç›®å½•æˆ–è¾“å…¥æ–°ç›®å½•
- **ç›®å½•ä¿¡æ¯å±•ç¤º**: åœ¨å›¾ç‰‡ç®¡ç†é¡µé¢æ˜¾ç¤ºå½“å‰ç›®å½•ä¿¡æ¯
- **ç›®å½•ç»Ÿè®¡**: æ”¯æŒæŒ‰ç›®å½•ç»Ÿè®¡å›¾ç‰‡æ•°é‡å’Œå­˜å‚¨å¤§å°

## æŠ€æœ¯æ ˆ

### å‰ç«¯

- React 18
- Ant Design 5
- Axios
- Day.js

### åç«¯

- Node.js
- Express
- Multer
- fs-extra

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Node.js 16+
- npm æˆ– yarn

### å®‰è£…ä¾èµ–

```bash
# å®‰è£…åç«¯ä¾èµ–
npm install

# å®‰è£…å‰ç«¯ä¾èµ–
cd client
npm install
```

### å¯åŠ¨æœåŠ¡

```bash
# å¯åŠ¨åç«¯æœåŠ¡ (ç«¯å£ 3001)
node server/index.js

# å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨ (ç«¯å£ 3000)
cd client
npm start
```

### å¿«é€Ÿéƒ¨ç½² - docker-componse.yml

```yaml
version: "3.8"

services:
  cloudimgs:
    # ä½¿ç”¨ Docker Hub ä¸Šçš„é•œåƒ
    image: qazzxxx/cloudimgs:latest
    ports:
      - "3001:3001"
    environment:
      - NODE_ENV=production
      - PORT=3001
      - STORAGE_PATH=/app/uploads
    volumes:
      - ./uploads:/app/uploads # ä¸Šä¼ ç›®å½•é…ç½®
      - ./logs:/app/logs
    restart: unless-stopped
    container_name: cloudimgs-app
```

## ä½¿ç”¨è¯´æ˜

### å›¾ç‰‡ä¸Šä¼ 

1. ç‚¹å‡»"ä¸Šä¼ å›¾ç‰‡"èœå•
2. é€‰æ‹©æˆ–è¾“å…¥å­ç›®å½•ï¼ˆå¯é€‰ï¼‰
   - å¯ä»¥ä»ä¸‹æ‹‰åˆ—è¡¨é€‰æ‹©ç°æœ‰ç›®å½•
   - å¯ä»¥è¾“å…¥æ–°ç›®å½•è·¯å¾„ï¼ˆå¦‚ï¼š2024/06/10ï¼‰
3. æ‹–æ‹½æˆ–ç‚¹å‡»é€‰æ‹©å›¾ç‰‡æ–‡ä»¶
4. æ”¯æŒæ‰¹é‡ä¸Šä¼ 

### å›¾ç‰‡ç®¡ç†

1. ç‚¹å‡»"å›¾ç‰‡ç®¡ç†"èœå•
2. é€‰æ‹©è¦æµè§ˆçš„ç›®å½•
3. æ”¯æŒæœç´¢å›¾ç‰‡åç§°
4. å¯ä»¥é¢„è§ˆã€ä¸‹è½½ã€å¤åˆ¶é“¾æ¥æˆ–åˆ é™¤å›¾ç‰‡
5. å½“å‰ç›®å½•ä¿¡æ¯ä¼šæ˜¾ç¤ºåœ¨é¡µé¢é¡¶éƒ¨

### ç»Ÿè®¡ä¿¡æ¯

1. ç‚¹å‡»"ç»Ÿè®¡ä¿¡æ¯"èœå•
2. æŸ¥çœ‹æ€»ä½“å­˜å‚¨ä½¿ç”¨æƒ…å†µ
3. æ”¯æŒæŒ‰ç›®å½•æŸ¥çœ‹ç»Ÿè®¡ä¿¡æ¯

## é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡

åˆ›å»º `.env` æ–‡ä»¶ï¼š

```env
PORT=3001
STORAGE_PATH=./uploads
```

### å­˜å‚¨è·¯å¾„

- é»˜è®¤å­˜å‚¨è·¯å¾„ï¼š`./uploads`
- æ”¯æŒå¤šå±‚ç›®å½•ç»“æ„
- è‡ªåŠ¨åˆ›å»ºä¸å­˜åœ¨çš„ç›®å½•

## æ–‡ä»¶æ ¼å¼æ”¯æŒ

- **å›¾ç‰‡æ ¼å¼**: JPG, PNG, GIF, WebP, BMP, SVG
- **æ–‡ä»¶å¤§å°**: æœ€å¤§ 10MB
- **ç›®å½•ç»“æ„**: æ”¯æŒæ— é™å±‚çº§çš„å­ç›®å½•

## API æ¥å£

### ğŸ“¤ å›¾ç‰‡ä¸Šä¼ 

```
POST /api/upload
```

**å‚æ•°è¯´æ˜ï¼š**

- `image` (å¿…éœ€): å›¾ç‰‡æ–‡ä»¶ï¼Œæ”¯æŒ multipart/form-data
- `dir` (å¯é€‰): å­ç›®å½•è·¯å¾„ï¼Œå¦‚ "2024/06/10" æˆ– "ç›¸å†Œ/å®¶åº­"

**æ”¯æŒæ ¼å¼ï¼š** JPG, PNG, GIF, WebP, BMP, SVG  
**æ–‡ä»¶å¤§å°é™åˆ¶ï¼š** æœ€å¤§ 10MB

**curl ç¤ºä¾‹ï¼š**

```bash
# ä¸Šä¼ åˆ°æ ¹ç›®å½•
curl -X POST http://localhost:3001/api/upload \
  -F "image=@/path/to/your/image.jpg"

# ä¸Šä¼ åˆ°æŒ‡å®šå­ç›®å½•
curl -X POST "http://localhost:3001/api/upload?dir=2024/06/10" \
  -F "image=@/path/to/your/image.jpg"

# ä¸Šä¼ ä¸­æ–‡æ–‡ä»¶åå›¾ç‰‡
curl -X POST "http://localhost:3001/api/upload?dir=ç›¸å†Œ/å®¶åº­" \
  -F "image=@/path/to/ä½ çš„å›¾ç‰‡.jpg"
```

**å“åº”ç¤ºä¾‹ï¼š**

```json
{
  "success": true,
  "message": "å›¾ç‰‡ä¸Šä¼ æˆåŠŸ",
  "data": {
    "filename": "image.jpg",
    "originalName": "åŸå§‹æ–‡ä»¶å.jpg",
    "size": 1024000,
    "mimetype": "image/jpeg",
    "uploadTime": "2024-01-01T12:00:00.000Z",
    "url": "/api/images/image.jpg",
    "relPath": "image.jpg"
  }
}
```

### ğŸ“‹ è·å–å›¾ç‰‡åˆ—è¡¨

```
GET /api/images
```

**å‚æ•°è¯´æ˜ï¼š**

- `dir` (å¯é€‰): æŒ‡å®šç›®å½•è·¯å¾„ï¼Œå¦‚ "2024/06/10"

**curl ç¤ºä¾‹ï¼š**

```bash
# è·å–æ ¹ç›®å½•æ‰€æœ‰å›¾ç‰‡
curl http://localhost:3001/api/images

# è·å–æŒ‡å®šç›®å½•å›¾ç‰‡
curl "http://localhost:3001/api/images?dir=2024/06/10"
```

**å“åº”ç¤ºä¾‹ï¼š**

```json
{
  "success": true,
  "data": [
    {
      "filename": "image.jpg",
      "relPath": "image.jpg",
      "size": 1024000,
      "uploadTime": "2024-01-01T12:00:00.000Z",
      "url": "/api/images/image.jpg"
    }
  ]
}
```

### ğŸ² è·å–éšæœºå›¾ç‰‡

```
GET /api/random
```

**å‚æ•°è¯´æ˜ï¼š**

- `dir` (å¯é€‰): æŒ‡å®šç›®å½•è·¯å¾„

**curl ç¤ºä¾‹ï¼š**

```bash
# è·å–æ ¹ç›®å½•éšæœºå›¾ç‰‡
curl http://localhost:3001/api/random

# è·å–æŒ‡å®šç›®å½•éšæœºå›¾ç‰‡
curl "http://localhost:3001/api/random?dir=2024/06/10"
```

### ğŸ“Š è·å–ç»Ÿè®¡ä¿¡æ¯

```
GET /api/stats
```

**å‚æ•°è¯´æ˜ï¼š**

- `dir` (å¯é€‰): æŒ‡å®šç›®å½•è·¯å¾„

**curl ç¤ºä¾‹ï¼š**

```bash
# è·å–æ€»ä½“ç»Ÿè®¡
curl http://localhost:3001/api/stats

# è·å–æŒ‡å®šç›®å½•ç»Ÿè®¡
curl "http://localhost:3001/api/stats?dir=2024/06/10"
```

**å“åº”ç¤ºä¾‹ï¼š**

```json
{
  "success": true,
  "data": {
    "totalImages": 100,
    "totalSize": 104857600,
    "storagePath": "/app/uploads"
  }
}
```

### ğŸ“ è·å–ç›®å½•åˆ—è¡¨

```
GET /api/directories
```

**å‚æ•°è¯´æ˜ï¼š**

- `dir` (å¯é€‰): æŒ‡å®šçˆ¶ç›®å½•è·¯å¾„

**curl ç¤ºä¾‹ï¼š**

```bash
# è·å–æ ¹ç›®å½•ä¸‹çš„å­ç›®å½•
curl http://localhost:3001/api/directories

# è·å–æŒ‡å®šç›®å½•ä¸‹çš„å­ç›®å½•
curl "http://localhost:3001/api/directories?dir=2024"
```

**å“åº”ç¤ºä¾‹ï¼š**

```json
{
  "success": true,
  "data": [
    {
      "name": "2024",
      "path": "2024",
      "fullPath": "/app/uploads/2024"
    }
  ]
}
```

### ğŸ—‘ï¸ åˆ é™¤å›¾ç‰‡

```
DELETE /api/images/{å›¾ç‰‡è·¯å¾„}
```

**å‚æ•°è¯´æ˜ï¼š**

- `å›¾ç‰‡è·¯å¾„` (å¿…éœ€): å›¾ç‰‡çš„ç›¸å¯¹è·¯å¾„ï¼Œå¦‚ "image.jpg" æˆ– "2024/06/10/image.jpg"

**curl ç¤ºä¾‹ï¼š**

```bash
# åˆ é™¤æ ¹ç›®å½•å›¾ç‰‡
curl -X DELETE "http://localhost:3001/api/images/image.jpg"

# åˆ é™¤å­ç›®å½•å›¾ç‰‡
curl -X DELETE "http://localhost:3001/api/images/2024/06/10/image.jpg"
```

### ğŸ“– å›¾ç‰‡è®¿é—®

```
GET /api/images/{å›¾ç‰‡è·¯å¾„}
```

**è¯´æ˜ï¼š** ç›´æ¥è®¿é—®å›¾ç‰‡æ–‡ä»¶ï¼Œæ”¯æŒä¸­æ–‡æ–‡ä»¶åå’Œç›®å½•å

**ç¤ºä¾‹ï¼š**

```bash
# è®¿é—®æ ¹ç›®å½•å›¾ç‰‡
curl http://localhost:3001/api/images/image.jpg

# è®¿é—®å­ç›®å½•å›¾ç‰‡
curl http://localhost:3001/api/images/2024/06/10/image.jpg
```

### âš ï¸ æ³¨æ„äº‹é¡¹

- æ‰€æœ‰ API éƒ½æ”¯æŒä¸­æ–‡æ–‡ä»¶åå’Œç›®å½•åï¼Œä¼šè‡ªåŠ¨è¿›è¡Œ URL ç¼–ç å¤„ç†
- å›¾ç‰‡è®¿é—® URL å¯ä»¥ç›´æ¥åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€
- ç›®å½•è·¯å¾„æ”¯æŒæ— é™å±‚çº§åµŒå¥—
- æ–‡ä»¶åä¼šè‡ªåŠ¨å¤„ç†ç‰¹æ®Šå­—ç¬¦ï¼Œä½†ä¿ç•™ä¸­æ–‡å­—ç¬¦
- ä¸Šä¼ æ—¶ä¼šè‡ªåŠ¨æ£€æŸ¥æ–‡ä»¶ç±»å‹å’Œå¤§å°é™åˆ¶

## æ›´æ–°æ—¥å¿—

### v1.1.0 (æœ€æ–°)

- âœ¨ æ–°å¢å­ç›®å½•ç®¡ç†åŠŸèƒ½
- âœ¨ æ™ºèƒ½ç›®å½•é€‰æ‹©å™¨
- âœ¨ ç›®å½•ä¿¡æ¯å±•ç¤º
- âœ¨ æ”¯æŒè¾“å…¥æ–°ç›®å½•
- ğŸ¨ ä¼˜åŒ–ç”¨æˆ·ç•Œé¢

### v1.0.0

- ğŸ‰ åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- ğŸ“¤ å›¾ç‰‡ä¸Šä¼ åŠŸèƒ½
- ğŸ–¼ï¸ å›¾ç‰‡ç®¡ç†åŠŸèƒ½
- ğŸ“Š ç»Ÿè®¡ä¿¡æ¯åŠŸèƒ½

## è®¸å¯è¯

MIT License
